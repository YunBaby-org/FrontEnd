{"version":3,"sources":["webpack:///./src/views/stomp/index.vue?a739","webpack:///src/views/stomp/index.vue","webpack:///./src/views/stomp/index.vue?dac9","webpack:///./src/views/stomp/index.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","staticStyle","attrs","model","value","callback","$$v","target_id","expression","on","StartSubscribe","_v","_s","status","target","ref","map_default_center","mapTypeControl","staticRenderFns","component"],"mappings":"uHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,iBAAiB,CAACF,EAAG,WAAW,CAACG,YAAY,CAAC,gBAAgB,QAAQC,MAAM,CAAC,YAAc,6BAA6BC,MAAM,CAACC,MAAOV,EAAa,UAAEW,SAAS,SAAUC,GAAMZ,EAAIa,UAAUD,GAAKE,WAAW,eAAeV,EAAG,YAAY,CAACG,YAAY,CAAC,MAAQ,OAAO,gBAAgB,QAAQQ,GAAG,CAAC,MAAQf,EAAIgB,iBAAiB,CAAChB,EAAIiB,GAAG,eAAeb,EAAG,KAAK,CAACJ,EAAIiB,GAAGjB,EAAIkB,GAAGlB,EAAImB,WAAWf,EAAG,KAAK,CAACJ,EAAIiB,GAAGjB,EAAIkB,GAAGlB,EAAIoB,WAAWhB,EAAG,UAAU,CAACiB,IAAI,MAAMd,YAAY,CAAC,MAAQ,OAAO,OAAS,SAASC,MAAM,CAAC,OAASR,EAAIsB,mBAAmB,KAAO,GAAG,cAAc,UAAU,QAAU,CAACC,gBAAe,KAAS,CAACnB,EAAG,aAAa,CAACI,MAAM,CAAC,SAAWR,EAAIoB,WAAW,IAAI,IAC9vBI,EAAkB,G,qBC2BtB,GACE,KADF,WAEI,MAAJ,CACM,GAAN,KACM,OAAN,KACM,SAAN,KACM,QAAN,KACM,OAAN,GACM,EAAN,OACM,mBAAN,CACQ,IAAR,UACQ,IAAR,YAEM,UAAN,GACM,OAAN,CACQ,IAAR,EACQ,IAAR,KAIE,QAAF,CACI,aAAJ,WAEM,KAAN,wDACM,KAAN,yBACM,KAAN,+DAEI,WAAJ,WACM,QAAN,2BACM,KAAN,aAEI,SAAJ,WACM,QAAN,sBACM,KAAN,gBAGI,WAAJ,YACM,KAAN,eACM,QAAN,0BAEM,IAAN,qBACM,OAAN,YACQ,IAAR,iBACU,QAAV,4BACU,MACF,IAAR,kBACU,QAAV,6BACU,MACF,IAAR,aACU,QAAV,wBACU,MACF,IAAR,UACU,QAAV,qBACU,KAAV,6BACU,KAAV,8BACU,KAAV,yCACU,KAAV,0CACU,MACF,IAAR,iBACU,QAAV,4BACU,QAGN,eAAJ,WACM,IAAN,oFACM,KAAN,qCAEI,YAAJ,aAGI,YAAJ,cAIE,SAAF,GAGE,QA7EF,WA8EI,KAAJ,eACI,QAAJ,eACI,QAAJ,yBC5G8V,I,YCO1VC,EAAY,eACd,EACA1B,EACAyB,GACA,EACA,KACA,KACA,MAIa,aAAAC,E","file":"js/chunk-2d0dee5a.3e6144ac.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"app-container\"},[_c('el-input',{staticStyle:{\"margin-bottom\":\"30px\"},attrs:{\"placeholder\":\"please enter target's id \"},model:{value:(_vm.target_id),callback:function ($$v) {_vm.target_id=$$v},expression:\"target_id\"}}),_c('el-button',{staticStyle:{\"width\":\"100%\",\"margin-bottom\":\"30px\"},on:{\"click\":_vm.StartSubscribe}},[_vm._v(\"subscribe\")]),_c('h1',[_vm._v(_vm._s(_vm.status))]),_c('h1',[_vm._v(_vm._s(_vm.target))]),_c('GmapMap',{ref:\"map\",staticStyle:{\"width\":\"100%\",\"height\":\"700px\"},attrs:{\"center\":_vm.map_default_center,\"zoom\":18,\"map-type-id\":\"terrain\",\"options\":{mapTypeControl:false}}},[_c('GmapMarker',{attrs:{\"position\":_vm.target}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"app-container\">\n        <el-input v-model=\"target_id\" style=\"margin-bottom:30px;\" placeholder=\"please enter target's id \"></el-input>\n        <el-button style=\"width:100%;margin-bottom:30px;\" @click=\"StartSubscribe\">subscribe</el-button>\n        <h1>{{status}}</h1>\n        <h1>{{target}}</h1>\n        <!-- <el-button @click=\"test_axios\">test axios </el-button>\n        <el-button @click=\"test_axios2\">test axios </el-button> -->\n        <GmapMap\n            :center=\"map_default_center\"\n            :zoom=\"18\"\n            map-type-id=\"terrain\"\n            style=\"width: 100%; height:700px\"\n            :options=\"{mapTypeControl:false}\"\n            ref=\"map\">\n            <GmapMarker\n                :position='target'>\n            </GmapMarker>\n        </GmapMap>\n\n    </div>\n</template>\n\n\n\n<script>\nimport webstomp from 'webstomp-client';\n\nexport default {\n    data(){\n        return {\n            ws:null,\n            client:null,\n            send_msg:null,\n            message:null,\n            status:\"\",\n            d:\"none\",\n            map_default_center:{\n                lat:23.696413,\n                lng:120.532343\n            },\n            target_id:\"\",\n            target:{\n                lat:0,\n                lng:0\n            }\n        }\n    },\n    methods:{\n        StompConnect:function(){\n            //this.ws = new WebSocket('ws://127.0.0.1:15674/ws')\n            this.ws = new WebSocket('ws://'+location.hostname+':15674/ws')\n            this.client = webstomp.over(this.ws)\n            this.client.connect(process.env.VUE_APP_AMQP_USER,process.env.VUE_APP_AMQP_PASSWORD,this.on_connect,this.on_error)\n        },\n        on_connect:function(){\n            console.log('connected..........')\n            this.status = 'ok'\n        },\n        on_error:function(){\n            console.log('error.........')\n            this.status = 'error'\n\n        },\n        on_message:function(msg){\n            this.message = msg.body \n            console.log('message is '+msg.body)\n\n            let retv = JSON.parse(msg.body)\n            switch (retv.Response){\n            case 'GetPowerStatus':\n                console.log('enter GetPowerStatus')\n                break \n            case 'GetDeviceStatus':\n                console.log('enter GetDeviceStatus')\n                break;\n            case 'GetVersion':\n                console.log('enter GetVersion')\n                break;\n            case 'ScanGPS':\n                console.log('Enter ScanGPS')\n                this.target.lat = retv.Result.Latitude\n                this.target.lng = retv.Result.Longitude\n                this.map_default_center.lat = retv.Result.Latitude\n                this.map_default_center.lng = retv.Result.Longitude\n                break;\n            case 'ScanWifiSignal':\n                console.log('enter ScanWifiSignal')\n                break;\n            }\n        },\n        StartSubscribe:function(){\n            let destination = `/exchange/tracker-event/tracker.${this.target_id}.notification.respond`\n            this.client.subscribe(destination,this.on_message)\n        },\n        SendToQueue:function(){\n \n        },\n        SendToTopic:function(){\n    \n        }\n    },\n    computed:{\n\n    },\n    created(){\n        this.StompConnect()\n        console.log('host = ')\n        console.log(location.hostname)\n    }\n}\n</script>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=1f23f295&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}